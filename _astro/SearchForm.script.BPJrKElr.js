var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var be={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(je,function(){function n(r){var i=document,s=r.container||i.createElement("div"),o=r.preventSubmit||0;s.id=s.id||"autocomplete-"+G();var c=s.style,a=r.debounceWaitMs||0,h=r.disableAutoSelect||!1,f=s.parentElement,l=[],g="",v=2,x=r.showOnFocus,E,C=0,A,$=!1,_=!1;if(r.minLength!==void 0&&(v=r.minLength),!r.input)throw new Error("input undefined");var d=r.input;s.className="autocomplete "+(r.className||""),s.setAttribute("role","listbox"),d.setAttribute("role","combobox"),d.setAttribute("aria-expanded","false"),d.setAttribute("aria-autocomplete","list"),d.setAttribute("aria-controls",s.id),d.setAttribute("aria-owns",s.id),d.setAttribute("aria-activedescendant",""),d.setAttribute("aria-haspopup","listbox"),c.position="absolute";function G(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function z(){var u=s.parentNode;u&&u.removeChild(s)}function y(){A&&window.clearTimeout(A)}function O(){s.parentNode||(f||i.body).appendChild(s)}function S(){return!!s.parentNode}function T(){C++,l=[],g="",E=void 0,d.setAttribute("aria-activedescendant",""),d.setAttribute("aria-expanded","false"),z()}function U(){if(!S())return;d.setAttribute("aria-expanded","true"),c.height="auto",c.width=d.offsetWidth+"px";var u=0,m;function b(){var N=i.documentElement,L=N.clientTop||i.body.clientTop||0,I=N.clientLeft||i.body.clientLeft||0,B=window.pageYOffset||N.scrollTop,P=window.pageXOffset||N.scrollLeft;m=d.getBoundingClientRect();var w=m.top+d.offsetHeight+B-L,X=m.left+P-I;c.top=w+"px",c.left=X+"px",u=window.innerHeight-(m.top+d.offsetHeight),u<0&&(u=0),c.top=w+"px",c.bottom="",c.left=X+"px",c.maxHeight=u+"px"}b(),b(),r.customize&&m&&r.customize(d,m,s,u)}function F(){s.textContent="",d.setAttribute("aria-activedescendant","");var u=function(I,B,P){var w=i.createElement("div");return w.textContent=I.label||"",w};r.render&&(u=r.render);var m=function(I,B){var P=i.createElement("div");return P.textContent=I,P};r.renderGroup&&(m=r.renderGroup);var b=i.createDocumentFragment(),N=G();if(l.forEach(function(I,B){if(I.group&&I.group!==N){N=I.group;var P=m(I.group,g);P&&(P.className+=" group",b.appendChild(P))}var w=u(I,g,B);w&&(w.id=s.id+"_"+B,w.setAttribute("role","option"),w.addEventListener("click",function(X){_=!0;try{r.onSelect(I,d)}finally{_=!1}T(),X.preventDefault(),X.stopPropagation()}),I===E&&(w.className+=" selected",w.setAttribute("aria-selected","true"),d.setAttribute("aria-activedescendant",w.id)),b.appendChild(w))}),s.appendChild(b),l.length<1)if(r.emptyMsg){var L=i.createElement("div");L.id=s.id+"_"+G(),L.className="empty",L.textContent=r.emptyMsg,s.appendChild(L),d.setAttribute("aria-activedescendant",L.id)}else{T();return}O(),U(),ce()}function Z(){S()&&F()}function M(){Z()}function H(u){u.target!==s?Z():u.preventDefault()}function V(){_||Y(0)}function ce(){var u=s.getElementsByClassName("selected");if(u.length>0){var m=u[0],b=m.previousElementSibling;if(b&&b.className.indexOf("group")!==-1&&!b.previousElementSibling&&(m=b),m.offsetTop<s.scrollTop)s.scrollTop=m.offsetTop;else{var N=m.offsetTop+m.offsetHeight,L=s.scrollTop+s.offsetHeight;N>L&&(s.scrollTop+=N-L)}}}function Ne(){var u=l.indexOf(E);E=u===-1?void 0:l[(u+l.length-1)%l.length],ae(u)}function Ce(){var u=l.indexOf(E);E=l.length<1?void 0:u===-1?l[0]:l[(u+1)%l.length],ae(u)}function ae(u){l.length>0&&(Te(u),Oe(l.indexOf(E)),ce())}function Oe(u){var m=i.getElementById(s.id+"_"+u);m&&(m.classList.add("selected"),m.setAttribute("aria-selected","true"),d.setAttribute("aria-activedescendant",m.id))}function Te(u){var m=i.getElementById(s.id+"_"+u);m&&(m.classList.remove("selected"),m.removeAttribute("aria-selected"),d.removeAttribute("aria-activedescendant"))}function Re(u,m){var b=S();if(m==="Escape")T();else{if(!b||l.length<1)return;m==="ArrowUp"?Ne():Ce()}u.preventDefault(),b&&u.stopPropagation()}function $e(u){if(E){o===2&&u.preventDefault(),_=!0;try{r.onSelect(E,d)}finally{_=!1}T()}o===1&&u.preventDefault()}function le(u){var m=u.key;switch(m){case"ArrowUp":case"ArrowDown":case"Escape":Re(u,m);break;case"Enter":$e(u);break}}function ue(){x&&Y(1)}function Y(u){d.value.length>=v||u===1?(y(),A=window.setTimeout(function(){return he(d.value,u,d.selectionStart||0)},u===0||u===2?a:0)):T()}function he(u,m,b){if(!$){var N=++C;r.fetch(u,function(L){C===N&&L&&(l=L,g=u,E=l.length<1||h?void 0:l[0],F())},m,b)}}function fe(u){if(r.keyup){r.keyup({event:u,fetch:function(){return Y(0)}});return}!S()&&u.key==="ArrowDown"&&Y(0)}function de(u){r.click&&r.click({event:u,fetch:function(){return Y(2)}})}function pe(){setTimeout(function(){i.activeElement!==d&&T()},200)}function Fe(){he(d.value,3,d.selectionStart||0)}s.addEventListener("mousedown",function(u){u.stopPropagation(),u.preventDefault()}),s.addEventListener("focus",function(){return d.focus()}),z();function Pe(){d.removeEventListener("focus",ue),d.removeEventListener("keyup",fe),d.removeEventListener("click",de),d.removeEventListener("keydown",le),d.removeEventListener("input",V),d.removeEventListener("blur",pe),window.removeEventListener("resize",M),i.removeEventListener("scroll",H,!0),d.removeAttribute("role"),d.removeAttribute("aria-expanded"),d.removeAttribute("aria-autocomplete"),d.removeAttribute("aria-controls"),d.removeAttribute("aria-activedescendant"),d.removeAttribute("aria-owns"),d.removeAttribute("aria-haspopup"),y(),T(),$=!0}return d.addEventListener("keyup",fe),d.addEventListener("click",de),d.addEventListener("keydown",le),d.addEventListener("input",V),d.addEventListener("blur",pe),d.addEventListener("focus",ue),window.addEventListener("resize",M),i.addEventListener("scroll",H,!0),{destroy:Pe,fetch:Fe}}return n})})(be);var He=be.exports;const Ke=De(He);function j(t){return Array.isArray?Array.isArray(t):we(t)==="[object Array]"}const We=1/0;function ze(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-We?"-0":e}function Be(t){return t==null?"":ze(t)}function R(t){return typeof t=="string"}function ye(t){return typeof t=="number"}function Ge(t){return t===!0||t===!1||Ue(t)&&we(t)=="[object Boolean]"}function Me(t){return typeof t=="object"}function Ue(t){return Me(t)&&t!==null}function k(t){return t!=null}function q(t){return!t.trim().length}function we(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Ve="Incorrect 'index' type",Ye=t=>`Invalid value for key ${t}`,Xe=t=>`Pattern length exceeds max of ${t}.`,Qe=t=>`Missing ${t} property in key`,Je=t=>`Property 'weight' in key '${t}' must be a positive integer`,ge=Object.prototype.hasOwnProperty;class Ze{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=Ae(r);n+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ae(t){let e=null,n=null,r=null,i=1,s=null;if(R(t)||j(t))r=t,e=me(t),n=ee(t);else{if(!ge.call(t,"name"))throw new Error(Qe("name"));const o=t.name;if(r=o,ge.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Je(o));e=me(o),n=ee(o),s=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:s}}function me(t){return j(t)?t:t.split(".")}function ee(t){return j(t)?t.join("."):t}function qe(t,e){let n=[],r=!1;const i=(s,o,c)=>{if(k(s))if(!o[c])n.push(s);else{let a=o[c];const h=s[a];if(!k(h))return;if(c===o.length-1&&(R(h)||ye(h)||Ge(h)))n.push(Be(h));else if(j(h)){r=!0;for(let f=0,l=h.length;f<l;f+=1)i(h[f],o,c+1)}else o.length&&i(h,o,c+1)}};return i(t,R(e)?e.split("."):e,0),r?n:n[0]}const et={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},tt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},nt={location:0,threshold:.6,distance:100},rt={useExtendedSearch:!1,getFn:qe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...tt,...et,...nt,...rt};const st=/[^ ]+/g;function it(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(st).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),c=parseFloat(Math.round(o*r)/r);return n.set(s,c),c},clear(){n.clear()}}}class oe{constructor({getFn:e=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){this.norm=it(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,R(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();R(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!k(e)||q(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(k(o)){if(j(o)){let c=[];const a=[{nestedArrIndex:-1,value:o}];for(;a.length;){const{nestedArrIndex:h,value:f}=a.pop();if(k(f))if(R(f)&&!q(f)){let l={v:f,i:h,n:this.norm.get(f)};c.push(l)}else j(f)&&f.forEach((l,g)=>{a.push({nestedArrIndex:g,value:l})})}r.$[s]=c}else if(R(o)&&!q(o)){let c={v:o,n:this.norm.get(o)};r.$[s]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function _e(t,e,{getFn:n=p.getFn,fieldNormWeight:r=p.fieldNormWeight}={}){const i=new oe({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(Ae)),i.setSources(e),i.create(),i}function ot(t,{getFn:e=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const{keys:r,records:i}=t,s=new oe({getFn:e,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Q(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=p.distance,ignoreLocation:s=p.ignoreLocation}={}){const o=e/t.length;if(s)return o;const c=Math.abs(r-n);return i?o+c/i:c?1:o}function ct(t=[],e=p.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let c=t[s];c&&r===-1?r=s:!c&&r!==-1&&(i=s-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[s-1]&&s-r>=e&&n.push([r,s-1]),n}const K=32;function at(t,e,n,{location:r=p.location,distance:i=p.distance,threshold:s=p.threshold,findAllMatches:o=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,includeMatches:a=p.includeMatches,ignoreLocation:h=p.ignoreLocation}={}){if(e.length>K)throw new Error(Xe(K));const f=e.length,l=t.length,g=Math.max(0,Math.min(r,l));let v=s,x=g;const E=c>1||a,C=E?Array(l):[];let A;for(;(A=t.indexOf(e,x))>-1;){let y=Q(e,{currentLocation:A,expectedLocation:g,distance:i,ignoreLocation:h});if(v=Math.min(y,v),x=A+f,E){let O=0;for(;O<f;)C[A+O]=1,O+=1}}x=-1;let $=[],_=1,d=f+l;const G=1<<f-1;for(let y=0;y<f;y+=1){let O=0,S=d;for(;O<S;)Q(e,{errors:y,currentLocation:g+S,expectedLocation:g,distance:i,ignoreLocation:h})<=v?O=S:d=S,S=Math.floor((d-O)/2+O);d=S;let T=Math.max(1,g-S+1),U=o?l:Math.min(g+S,l)+f,F=Array(U+2);F[U+1]=(1<<y)-1;for(let M=U;M>=T;M-=1){let H=M-1,V=n[t.charAt(H)];if(E&&(C[H]=+!!V),F[M]=(F[M+1]<<1|1)&V,y&&(F[M]|=($[M+1]|$[M])<<1|1|$[M+1]),F[M]&G&&(_=Q(e,{errors:y,currentLocation:H,expectedLocation:g,distance:i,ignoreLocation:h}),_<=v)){if(v=_,x=H,x<=g)break;T=Math.max(1,2*g-x)}}if(Q(e,{errors:y+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:h})>v)break;$=F}const z={isMatch:x>=0,score:Math.max(.001,_)};if(E){const y=ct(C,c);y.length?a&&(z.indices=y):z.isMatch=!1}return z}function lt(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class Se{constructor(e,{location:n=p.location,threshold:r=p.threshold,distance:i=p.distance,includeMatches:s=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:a=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:h},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(g,v)=>{this.chunks.push({pattern:g,alphabet:lt(g),startIndex:v})},l=this.pattern.length;if(l>K){let g=0;const v=l%K,x=l-v;for(;g<x;)f(this.pattern.substr(g,K),g),g+=K;if(v){const E=l-K;f(this.pattern.substr(E),E)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let x={isMatch:!0,score:0};return r&&(x.indices=[[0,e.length-1]]),x}const{location:i,distance:s,threshold:o,findAllMatches:c,minMatchCharLength:a,ignoreLocation:h}=this.options;let f=[],l=0,g=!1;this.chunks.forEach(({pattern:x,alphabet:E,startIndex:C})=>{const{isMatch:A,score:$,indices:_}=at(e,x,E,{location:i+C,distance:s,threshold:o,findAllMatches:c,minMatchCharLength:a,includeMatches:r,ignoreLocation:h});A&&(g=!0),l+=$,A&&_&&(f=[...f,..._])});let v={isMatch:g,score:g?l/this.chunks.length:1};return g&&r&&(v.indices=f),v}}class D{constructor(e){this.pattern=e}static isMultiMatch(e){return ve(e,this.multiRegex)}static isSingleMatch(e){return ve(e,this.singleRegex)}search(){}}function ve(t,e){const n=t.match(e);return n?n[1]:null}class ut extends D{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ht extends D{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class ft extends D{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class dt extends D{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class pt extends D{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class gt extends D{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Le extends D{constructor(e,{location:n=p.location,threshold:r=p.threshold,distance:i=p.distance,includeMatches:s=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:c=p.minMatchCharLength,isCaseSensitive:a=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){super(e),this._bitapSearch=new Se(e,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:a,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ie extends D{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const te=[ut,Ie,ft,dt,gt,pt,ht,Le],Ee=te.length,mt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vt="|";function Et(t,e={}){return t.split(vt).map(n=>{let r=n.trim().split(mt).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const c=r[s];let a=!1,h=-1;for(;!a&&++h<Ee;){const f=te[h];let l=f.isMultiMatch(c);l&&(i.push(new f(l,e)),a=!0)}if(!a)for(h=-1;++h<Ee;){const f=te[h];let l=f.isSingleMatch(c);if(l){i.push(new f(l,e));break}}}return i})}const xt=new Set([Le.type,Ie.type]);class bt{constructor(e,{isCaseSensitive:n=p.isCaseSensitive,includeMatches:r=p.includeMatches,minMatchCharLength:i=p.minMatchCharLength,ignoreLocation:s=p.ignoreLocation,findAllMatches:o=p.findAllMatches,location:c=p.location,threshold:a=p.threshold,distance:h=p.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:c,threshold:a,distance:h},this.pattern=n?e:e.toLowerCase(),this.query=Et(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],c=0;for(let a=0,h=n.length;a<h;a+=1){const f=n[a];o.length=0,s=0;for(let l=0,g=f.length;l<g;l+=1){const v=f[l],{isMatch:x,indices:E,score:C}=v.search(e);if(x){if(s+=1,c+=C,r){const A=v.constructor.type;xt.has(A)?o=[...o,...E]:o.push(E)}}else{c=0,s=0,o.length=0;break}}if(s){let l={isMatch:!0,score:c/s};return r&&(l.indices=o),l}}return{isMatch:!1,score:1}}}const ne=[];function yt(...t){ne.push(...t)}function re(t,e){for(let n=0,r=ne.length;n<r;n+=1){let i=ne[n];if(i.condition(t,e))return new i(t,e)}return new Se(t,e)}const J={AND:"$and",OR:"$or"},se={PATH:"$path",PATTERN:"$val"},ie=t=>!!(t[J.AND]||t[J.OR]),Mt=t=>!!t[se.PATH],wt=t=>!j(t)&&Me(t)&&!ie(t),xe=t=>({[J.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function ke(t,e,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=Mt(i);if(!o&&s.length>1&&!ie(i))return r(xe(i));if(wt(i)){const a=o?i[se.PATH]:s[0],h=o?i[se.PATTERN]:i[a];if(!R(h))throw new Error(Ye(a));const f={keyId:ee(a),pattern:h};return n&&(f.searcher=re(h,e)),f}let c={children:[],operator:s[0]};return s.forEach(a=>{const h=i[a];j(h)&&h.forEach(f=>{c.children.push(r(f))})}),c};return ie(t)||(t=xe(t)),r(t)}function At(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const c=i?i.weight:null;r*=Math.pow(o===0&&c?Number.EPSILON:o,(c||1)*(e?1:s))}),n.score=r})}function _t(t,e){const n=t.matches;e.matches=[],k(n)&&n.forEach(r=>{if(!k(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function St(t,e){e.score=t.score}function Lt(t,e,{includeMatches:n=p.includeMatches,includeScore:r=p.includeScore}={}){const i=[];return n&&i.push(_t),r&&i.push(St),t.map(s=>{const{idx:o}=s,c={item:e[o],refIndex:o};return i.length&&i.forEach(a=>{a(s,c)}),c})}class W{constructor(e,n={},r){this.options={...p,...n},this.options.useExtendedSearch,this._keyStore=new Ze(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof oe))throw new Error(Ve);this._myIndex=n||_e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){k(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:c}=this.options;let a=R(e)?R(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return At(a,{ignoreFieldNorm:c}),s&&a.sort(o),ye(n)&&n>-1&&(a=a.slice(0,n)),Lt(a,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=re(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:c})=>{if(!k(s))return;const{isMatch:a,score:h,indices:f}=n.searchIn(s);a&&i.push({item:s,idx:o,matches:[{score:h,value:s,norm:c,indices:f}]})}),i}_searchLogical(e){const n=ke(e,this.options),r=(c,a,h)=>{if(!c.children){const{keyId:l,searcher:g}=c,v=this._findMatches({key:this._keyStore.get(l),value:this._myIndex.getValueForItemAtKeyId(a,l),searcher:g});return v&&v.length?[{idx:h,item:a,matches:v}]:[]}const f=[];for(let l=0,g=c.children.length;l<g;l+=1){const v=c.children[l],x=r(v,a,h);if(x.length)f.push(...x);else if(c.operator===J.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:c,i:a})=>{if(k(c)){let h=r(n,c,a);h.length&&(s[a]||(s[a]={idx:a,item:c,matches:[]},o.push(s[a])),h.forEach(({matches:f})=>{s[a].matches.push(...f)}))}}),o}_searchObjectList(e){const n=re(e,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:c})=>{if(!k(o))return;let a=[];r.forEach((h,f)=>{a.push(...this._findMatches({key:h,value:o[f],searcher:n}))}),a.length&&s.push({idx:c,item:o,matches:a})}),s}_findMatches({key:e,value:n,searcher:r}){if(!k(n))return[];let i=[];if(j(n))n.forEach(({v:s,i:o,n:c})=>{if(!k(s))return;const{isMatch:a,score:h,indices:f}=r.searchIn(s);a&&i.push({score:h,key:e,value:s,idx:o,norm:c,indices:f})});else{const{v:s,n:o}=n,{isMatch:c,score:a,indices:h}=r.searchIn(s);c&&i.push({score:a,key:e,value:s,norm:o,indices:h})}return i}}W.version="6.6.2";W.createIndex=_e;W.parseIndex=ot;W.config=p;W.parseQuery=ke;yt(bt);const It="/english";async function kt(){const t=await fetch(`${It}/searchindex.json`);if(t.status>400)throw new Error("Failed to fetch searchindex.json");return t.json()}function Nt(t){const e=W.parseIndex(t.index);return new W(t.rows,{},e)}const Ct="/english";async function Ot(t){let e;Ke({input:t,fetch:async(n,r)=>{e??=Nt(await kt());const i=e.search(n,{limit:10});r(i.map(s=>({label:s.item.title,value:s.item.slug})))},onSelect:n=>{const r=n.value;window.location.href=`${Ct}/${r}`}})}export{Ot as setup};
